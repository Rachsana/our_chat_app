{"ast":null,"code":"import React from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MessageList=_ref=>{let{messages,currentUserId,messagesEndRef}=_ref;const formatTime=date=>{return new Date(date).toLocaleTimeString('en-US',{hour:'2-digit',minute:'2-digit'});};const formatDate=date=>{const messageDate=new Date(date);const today=new Date();const yesterday=new Date(today);yesterday.setDate(yesterday.getDate()-1);if(messageDate.toDateString()===today.toDateString()){return'Today';}else if(messageDate.toDateString()===yesterday.toDateString()){return'Yesterday';}else{return messageDate.toLocaleDateString('en-US',{month:'short',day:'numeric',year:messageDate.getFullYear()!==today.getFullYear()?'numeric':undefined});}};const shouldShowDateSeparator=(currentMsg,prevMsg)=>{if(!prevMsg)return true;const currentDate=new Date(currentMsg.createdAt).toDateString();const prevDate=new Date(prevMsg.createdAt).toDateString();return currentDate!==prevDate;};return/*#__PURE__*/_jsxs(\"div\",{className:\"message-list\",children:[messages.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-messages\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No messages yet. Start the conversation!\"})}):messages.map((message,index)=>{const isSentByMe=message.sender._id===currentUserId;const showDateSeparator=shouldShowDateSeparator(message,messages[index-1]);return/*#__PURE__*/_jsxs(React.Fragment,{children:[showDateSeparator&&/*#__PURE__*/_jsx(\"div\",{className:\"date-separator\",children:/*#__PURE__*/_jsx(\"span\",{children:formatDate(message.createdAt)})}),/*#__PURE__*/_jsx(\"div\",{className:\"message \".concat(isSentByMe?'sent':'received'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"message-content\",children:[/*#__PURE__*/_jsx(\"p\",{children:message.content}),/*#__PURE__*/_jsx(\"span\",{className:\"message-time\",children:formatTime(message.createdAt)})]})})]},message._id);}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]});};export default MessageList;","map":{"version":3,"names":["React","jsx","_jsx","jsxs","_jsxs","MessageList","_ref","messages","currentUserId","messagesEndRef","formatTime","date","Date","toLocaleTimeString","hour","minute","formatDate","messageDate","today","yesterday","setDate","getDate","toDateString","toLocaleDateString","month","day","year","getFullYear","undefined","shouldShowDateSeparator","currentMsg","prevMsg","currentDate","createdAt","prevDate","className","children","length","map","message","index","isSentByMe","sender","_id","showDateSeparator","Fragment","concat","content","ref"],"sources":["C:/Users/rrach/OneDrive/Desktop/our_chat_app/client/src/components/MessageList.js"],"sourcesContent":["import React from 'react';\r\n\r\nconst MessageList = ({ messages, currentUserId, messagesEndRef }) => {\r\n  const formatTime = (date) => {\r\n    return new Date(date).toLocaleTimeString('en-US', {\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    const messageDate = new Date(date);\r\n    const today = new Date();\r\n    const yesterday = new Date(today);\r\n    yesterday.setDate(yesterday.getDate() - 1);\r\n\r\n    if (messageDate.toDateString() === today.toDateString()) {\r\n      return 'Today';\r\n    } else if (messageDate.toDateString() === yesterday.toDateString()) {\r\n      return 'Yesterday';\r\n    } else {\r\n      return messageDate.toLocaleDateString('en-US', {\r\n        month: 'short',\r\n        day: 'numeric',\r\n        year: messageDate.getFullYear() !== today.getFullYear() ? 'numeric' : undefined\r\n      });\r\n    }\r\n  };\r\n\r\n  const shouldShowDateSeparator = (currentMsg, prevMsg) => {\r\n    if (!prevMsg) return true;\r\n    const currentDate = new Date(currentMsg.createdAt).toDateString();\r\n    const prevDate = new Date(prevMsg.createdAt).toDateString();\r\n    return currentDate !== prevDate;\r\n  };\r\n\r\n  return (\r\n    <div className=\"message-list\">\r\n      {messages.length === 0 ? (\r\n        <div className=\"no-messages\">\r\n          <p>No messages yet. Start the conversation!</p>\r\n        </div>\r\n      ) : (\r\n        messages.map((message, index) => {\r\n          const isSentByMe = message.sender._id === currentUserId;\r\n          const showDateSeparator = shouldShowDateSeparator(message, messages[index - 1]);\r\n\r\n          return (\r\n            <React.Fragment key={message._id}>\r\n              {showDateSeparator && (\r\n                <div className=\"date-separator\">\r\n                  <span>{formatDate(message.createdAt)}</span>\r\n                </div>\r\n              )}\r\n              <div className={`message ${isSentByMe ? 'sent' : 'received'}`}>\r\n                <div className=\"message-content\">\r\n                  <p>{message.content}</p>\r\n                  <span className=\"message-time\">{formatTime(message.createdAt)}</span>\r\n                </div>\r\n              </div>\r\n            </React.Fragment>\r\n          );\r\n        })\r\n      )}\r\n      <div ref={messagesEndRef} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MessageList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}